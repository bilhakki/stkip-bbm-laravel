import{f as n}from"./fetch-b8ff0b47.js";import{s as f}from"./cookie-b23bf575.js";window.editStudentModal=m;function m(a){return{element:a,errors:null,body:{...c},editStudentModalInit(){},async editStudentModalChangeHandler(e){if(e){const t=await this.fetchStudentById();this.facultyChangeHandler(t.faculty_id),this.body=t}else this.body={...c}},editSuccess(e){this.element.querySelector('button[aria-label="Close"]').click(),this.refreshTable()},updateStudentHandler(){this.errors=null,n.put(this.urlUpdate,{body:this.body}).then(e=>{this.editSuccess(e)}).catch(e=>{const t=e.message;let r=[];Object.keys(e.errors).forEach(s=>{r.push(e.errors[s])}),this.errors={message:t,errors:r}})},async fetchStudentById(){const e=await n(this.urlEdit);return{...e.user,...e,faculty_id:e.major.faculty_id,major_id:e.major.id}},_majors:[],facultyChangeHandler(e){return this._majors=[],this._majors=this.majors.filter(t=>t.faculty_id==e),this._majors}}}const i=document.querySelector("#table-filter-min-admission_year"),o=document.querySelector("#table-filter-max-admission_year");document.addEventListener("DOMContentLoaded",()=>{i&&o&&["input","change"].forEach(a=>{i.addEventListener(a,function(){this.value>o.value&&(this.value=o.value)}),o.addEventListener(a,function(){this.value<i.value&&(this.value=i.value)})})});const l=document.querySelector("#table-filter-min-current_credits"),u=document.querySelector("#table-filter-max-current_credits");document.addEventListener("DOMContentLoaded",()=>{l&&u&&["input","change"].forEach(a=>{l.addEventListener(a,function(){this.value>u.value&&(this.value=u.value)}),u.addEventListener(a,function(){this.value<l.value&&(this.value=l.value)})})});const d='#table-filter-faculty-wrapper input[type="checkbox"]',y="filter-student-faculty";document.querySelectorAll(d).forEach(function(a){a.addEventListener("change",e=>{let t=[];e.target.value==="on"?document.querySelector(d+"#table-filter-faculty-select-all").checked?document.querySelectorAll(d+"[value]").forEach(r=>{t.push(r.value)}):t=[]:document.querySelectorAll(d+":checked").forEach(r=>{t.push(r.value)}),f(y,t)})});window.faculties=[];window.majors=[];const c={name:"",email:"",password:"",date_of_birth:"",address:"",phone_number:"",guardian_name:"",guardian_phone_number:"",gender:"",blood_type:"",faculty_id:"",major_id:"",student_id:"",current_credits:0,admission_year:"",tuition_fee:5e4,status:""};window.pagedashboardStudent=b;function b(a){return{element:a,loading:!1,faculties:[],majors:[],data_id:null,urlEdit:null,urlUpdate:null,initPagedashboardStudent(){},fetchFaculties(e){n(e).then(t=>{this.faculties=t,window.faculties=t})},fetchMajors(e){n(e).then(t=>{this.majors=t,window.majors=t})},refreshTable(){const e=document.querySelector('button[aria-label="Refresh Table"]');e&&e.click()}}}window.createStudentModal=S;function S(a){return{element:a,errors:null,body:{...c},createStudentModalInit(){},createStudentModalChangeHandler(e){this.body={...c}},storeSuccess(e){this.element.querySelector('button[aria-label="Close"]').click(),this.refreshTable()},storeStudentHandler(){this.errors=null;const e=this.element.getAttribute("action");n.post(e,{body:this.body}).then(t=>{this.storeSuccess(t)}).catch(t=>{const r=t.message;let s=[];Object.keys(t.errors).forEach(h=>{s.push(t.errors[h])}),this.errors={message:r,errors:s}})},_majors:[],facultyChangeHandler(e){this._majors=[],this._majors=this.majors.filter(t=>t.faculty_id==e)}}}window.faculties=[];window.majors=[];window.pagedashboardStudent=_;function _(a){return{element:a,loading:!1,faculties:[],majors:[],data_id:null,urlEdit:null,urlUpdate:null,initPagedashboardStudent(){},fetchFaculties(e){n(e).then(t=>{this.faculties=t,window.faculties=t})},fetchMajors(e){n(e).then(t=>{this.majors=t,window.majors=t})},refreshTable(){const e=document.querySelector('button[aria-label="Refresh Table"]');e&&e.click()}}}
